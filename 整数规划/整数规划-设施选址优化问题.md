# æ•´æ•°è§„åˆ’ - è®¾æ–½é€‰å€ä¼˜åŒ–é—®é¢˜

## ä»€ä¹ˆæ˜¯æ•´æ•°è§„åˆ’ï¼Ÿ

æ•´æ•°è§„åˆ’å°±æ˜¯åœ¨ä¼˜åŒ–é—®é¢˜ä¸­ï¼Œæœ‰äº›å˜é‡å¿…é¡»æ˜¯æ•´æ•°ï¼ˆæ¯”å¦‚0æˆ–1ï¼‰ã€‚åœ¨è®¾æ–½é€‰å€é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬è¦å†³å®š"å»ºè¿˜æ˜¯ä¸å»º"ï¼Œè¿™å°±æ˜¯å…¸å‹çš„0-1æ•´æ•°è§„åˆ’é—®é¢˜ã€‚

## æ ¸å¿ƒä»£ç å®ç°

### 1. `solve_facility_location()` - è®¾æ–½é€‰å€æ±‚è§£

è¿™ä¸ªå‡½æ•°è§£å†³"åœ¨å“ªé‡Œå»ºè®¾æ–½æœ€çœé’±"çš„é—®é¢˜ã€‚

**å®Œæ•´ä»£ç æ­¥éª¤ï¼š**

```python
def solve_facility_location(self):
    # ç¬¬1æ­¥ï¼šå®šä¹‰é—®é¢˜æ•°æ®
    locations = ['åœ°ç‚¹A', 'åœ°ç‚¹B', 'åœ°ç‚¹C', 'åœ°ç‚¹D', 'åœ°ç‚¹E']
    construction_cost = [500, 400, 600, 350, 450]  # å»ºè®¾æˆæœ¬ï¼ˆä¸‡å…ƒï¼‰
    operating_cost = [80, 70, 90, 60, 75]          # å¹´è¿è¥æˆæœ¬ï¼ˆä¸‡å…ƒï¼‰
    capacity = [1200, 1000, 1500, 800, 1100]       # æœåŠ¡èƒ½åŠ›ï¼ˆä¸‡ä»¶/å¹´ï¼‰
    total_demand = 3000                             # æ€»éœ€æ±‚ï¼ˆä¸‡ä»¶/å¹´ï¼‰
    
    # ç¬¬2æ­¥ï¼šåˆ›å»ºä¼˜åŒ–é—®é¢˜
    prob = pulp.LpProblem("è®¾æ–½é€‰å€", pulp.LpMinimize)
    
    # ç¬¬3æ­¥ï¼šå®šä¹‰å†³ç­–å˜é‡ï¼ˆ0-1å˜é‡ï¼‰
    y = [pulp.LpVariable(f"y{i}", cat='Binary') for i in range(5)]
    
    # ç¬¬4æ­¥ï¼šè®¾ç½®ç›®æ ‡å‡½æ•°ï¼ˆæœ€å°åŒ–æ€»æˆæœ¬ï¼‰
    total_cost = pulp.lpSum([(construction_cost[i] + 5 * operating_cost[i]) * y[i] 
                            for i in range(5)])
    prob += total_cost
    
    # ç¬¬5æ­¥ï¼šæ·»åŠ çº¦æŸæ¡ä»¶
    prob += pulp.lpSum(y) == 3                    # å¿…é¡»é€‰3ä¸ªåœ°ç‚¹
    prob += pulp.lpSum([capacity[i] * y[i] for i in range(5)]) >= total_demand  # æ»¡è¶³éœ€æ±‚
    
    # ç¬¬6æ­¥ï¼šæ±‚è§£
    prob.solve(pulp.PULP_CBC_CMD(msg=0))
    
    # ç¬¬7æ­¥ï¼šè¯»å–ç»“æœ
    selected = [int(y[i].varValue) for i in range(5)]
    min_cost = pulp.value(prob.objective)
```

**è¯­æ³•è¦ç‚¹ï¼š**
- `pulp.LpVariable(name, cat='Binary')`ï¼šåˆ›å»º0-1å˜é‡
- `pulp.LpProblem(name, pulp.LpMinimize)`ï¼šåˆ›å»ºæœ€å°åŒ–é—®é¢˜
- `pulp.lpSum()`ï¼šæ±‚å’Œå‡½æ•°
- `prob += çº¦æŸæ¡ä»¶`ï¼šæ·»åŠ çº¦æŸ
- `prob.solve()`ï¼šæ±‚è§£é—®é¢˜
- `å˜é‡.varValue`ï¼šè·å–å˜é‡çš„æœ€ä¼˜å€¼

### 2. `solve_knapsack_problem()` - èƒŒåŒ…é—®é¢˜æ±‚è§£

è¿™ä¸ªå‡½æ•°è§£å†³"åœ¨æœ‰é™å®¹é‡ä¸‹é€‰ä»€ä¹ˆç‰©å“ä»·å€¼æœ€å¤§"çš„é—®é¢˜ã€‚

**å®Œæ•´ä»£ç æ­¥éª¤ï¼š**

```python
def solve_knapsack_problem(self):
    # ç¬¬1æ­¥ï¼šå®šä¹‰ç‰©å“æ•°æ®
    items = ['ç¬”è®°æœ¬ç”µè„‘', 'å¹³æ¿ç”µè„‘', 'æ™ºèƒ½æ‰‹æœº', 'è€³æœº', 'å……ç”µå®']
    values = [8000, 3000, 5000, 1500, 800]      # ä»·å€¼ï¼ˆå…ƒï¼‰
    weights = [2.5, 1.2, 0.8, 0.3, 0.5]        # é‡é‡ï¼ˆkgï¼‰
    capacity = 5.0                               # èƒŒåŒ…å®¹é‡ï¼ˆkgï¼‰
    
    # ç¬¬2æ­¥ï¼šåˆ›å»ºä¼˜åŒ–é—®é¢˜
    prob = pulp.LpProblem("èƒŒåŒ…é—®é¢˜", pulp.LpMaximize)
    
    # ç¬¬3æ­¥ï¼šå®šä¹‰å†³ç­–å˜é‡
    x = [pulp.LpVariable(f"x{i}", cat='Binary') for i in range(len(items))]
    
    # ç¬¬4æ­¥ï¼šè®¾ç½®ç›®æ ‡å‡½æ•°ï¼ˆæœ€å¤§åŒ–ä»·å€¼ï¼‰
    total_value = pulp.lpSum([values[i] * x[i] for i in range(len(items))])
    prob += total_value
    
    # ç¬¬5æ­¥ï¼šæ·»åŠ é‡é‡çº¦æŸ
    prob += pulp.lpSum([weights[i] * x[i] for i in range(len(items))]) <= capacity
    
    # ç¬¬6æ­¥ï¼šæ±‚è§£å¹¶è¯»å–ç»“æœ
    prob.solve(pulp.PULP_CBC_CMD(msg=0))
    selected_items = [int(x[i].varValue) for i in range(len(items))]
    max_value = pulp.value(prob.objective)
```

**è¯­æ³•è¦ç‚¹ï¼š**
- `pulp.LpMaximize`ï¼šæœ€å¤§åŒ–é—®é¢˜
- `<=` å’Œ `>=`ï¼šä¸ç­‰å¼çº¦æŸ
- `len(items)`ï¼šè·å–åˆ—è¡¨é•¿åº¦
- å¾ªç¯åˆ›å»ºå˜é‡ï¼š`[å˜é‡ for i in range(n)]`

### 3. `visualize_results()` - ç»“æœå¯è§†åŒ–

è¿™ä¸ªå‡½æ•°æŠŠä¼˜åŒ–ç»“æœç”»æˆå›¾è¡¨ï¼Œè®©ç»“æœæ›´ç›´è§‚ã€‚

**å®Œæ•´ä»£ç æ­¥éª¤ï¼š**

```python
def visualize_results(self):
    # ç¬¬1æ­¥ï¼šè®¾ç½®å›¾è¡¨
    fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))
    
    # ç¬¬2æ­¥ï¼šç»˜åˆ¶è®¾æ–½é€‰å€ç»“æœ
    colors = ['#FF6B6B' if selected else '#DDD' 
             for selected in self.results['selected']]
    bars1 = ax1.bar(self.results['locations'], self.results['capacity'], color=colors)
    ax1.set_title('è®¾æ–½é€‰å€ç»“æœ', fontsize=14, fontweight='bold')
    ax1.set_ylabel('æœåŠ¡èƒ½åŠ› (ä¸‡ä»¶/å¹´)')
    
    # ç¬¬3æ­¥ï¼šæ·»åŠ é€‰ä¸­æ ‡è®°
    for i, (bar, selected) in enumerate(zip(bars1, self.results['selected'])):
        if selected:
            ax1.text(bar.get_x() + bar.get_width()/2, bar.get_height() + 20,
                    'âœ“', ha='center', va='bottom', fontsize=16, color='red')
    
    # ç¬¬4æ­¥ï¼šç»˜åˆ¶èƒŒåŒ…é—®é¢˜ç»“æœ
    knapsack = self.results['knapsack']
    colors = ['#32CD32' if selected else '#DDD' 
             for selected in knapsack['selected_items']]
    bars2 = ax2.bar(knapsack['items'], knapsack['values'], color=colors)
    ax2.set_title('èƒŒåŒ…é—®é¢˜ - ç‰©å“é€‰æ‹©', fontsize=14, fontweight='bold')
    
    # ç¬¬5æ­¥ï¼šä¿å­˜å›¾è¡¨
    plt.savefig('integer_programming_results.png', dpi=300, bbox_inches='tight')
```

**è¯­æ³•è¦ç‚¹ï¼š**
- `plt.subplots(1, 2)`ï¼šåˆ›å»º1è¡Œ2åˆ—çš„å­å›¾
- `ax.bar()`ï¼šç»˜åˆ¶æŸ±çŠ¶å›¾
- `ax.text()`ï¼šæ·»åŠ æ–‡å­—æ ‡æ³¨
- `enumerate(zip())`ï¼šåŒæ—¶éå†å¤šä¸ªåˆ—è¡¨
- `plt.savefig()`ï¼šä¿å­˜å›¾ç‰‡

### 4. `scenario_analysis()` - æƒ…æ™¯åˆ†æ

è¿™ä¸ªå‡½æ•°åˆ†æ"å¦‚æœéœ€æ±‚é‡å˜åŒ–ï¼Œæœ€ä¼˜æ–¹æ¡ˆä¼šæ€ä¹ˆå˜"ã€‚

**å®Œæ•´ä»£ç æ­¥éª¤ï¼š**

```python
def scenario_analysis(self):
    # ç¬¬1æ­¥ï¼šè®¾ç½®ä¸åŒçš„éœ€æ±‚é‡
    base_demand = self.results['total_demand']
    for demand_change in [0.8, 0.9, 1.1, 1.2]:  # éœ€æ±‚é‡å˜åŒ–å€æ•°
        new_demand = base_demand * demand_change
        
        # ç¬¬2æ­¥ï¼šé‡æ–°å»ºç«‹ä¼˜åŒ–é—®é¢˜
        prob = pulp.LpProblem("æƒ…æ™¯åˆ†æ", pulp.LpMinimize)
        y = [pulp.LpVariable(f"y{i}", cat='Binary') for i in range(5)]
        
        # ç¬¬3æ­¥ï¼šé‡æ–°æ±‚è§£
        prob.solve(pulp.PULP_CBC_CMD(msg=0))
        
        # ç¬¬4æ­¥ï¼šè¾“å‡ºç»“æœ
        if prob.status == 1:  # æœ‰æœ€ä¼˜è§£
            new_cost = pulp.value(prob.objective)
            print(f"éœ€æ±‚é‡ {new_demand:.0f} ä¸‡ä»¶/å¹´: æ€»æˆæœ¬ {new_cost:.2f} ä¸‡å…ƒ")
```

**è¯­æ³•è¦ç‚¹ï¼š**
- `for å˜é‡ in åˆ—è¡¨`ï¼šå¾ªç¯éå†
- `prob.status == 1`ï¼šæ£€æŸ¥æ˜¯å¦æœ‰æœ€ä¼˜è§£
- `f"å­—ç¬¦ä¸²{å˜é‡:.2f}"`ï¼šæ ¼å¼åŒ–è¾“å‡ºï¼ˆä¿ç•™2ä½å°æ•°ï¼‰

### 5. `generate_report()` - ç”ŸæˆæŠ¥å‘Š

è¿™ä¸ªå‡½æ•°æŠŠæ‰€æœ‰ç»“æœæ•´ç†æˆä¸€ä»½å®Œæ•´çš„æŠ¥å‘Šã€‚

**å®Œæ•´ä»£ç æ­¥éª¤ï¼š**

```python
def generate_report(self):
    # ç¬¬1æ­¥ï¼šè¾“å‡ºé—®é¢˜æ¦‚è¿°
    print("ğŸ¯ è®¾æ–½é€‰å€é—®é¢˜:")
    print("  â€¢ ä¼˜åŒ–ç›®æ ‡: æœ€å°åŒ–æ€»æˆæœ¬")
    print("  â€¢ å†³ç­–å˜é‡: æ˜¯å¦åœ¨å€™é€‰åœ°ç‚¹å»ºè®¾è®¾æ–½")
    
    # ç¬¬2æ­¥ï¼šè¾“å‡ºæœ€ä¼˜æ–¹æ¡ˆ
    print("ğŸ“Š æœ€ä¼˜æ–¹æ¡ˆ:")
    for detail in self.results['selected_details']:
        print(f"  â€¢ {detail['location']}: å»ºè®¾æˆæœ¬ {detail['construction_cost']}ä¸‡å…ƒ")
    
    # ç¬¬3æ­¥ï¼šè®¡ç®—æˆæœ¬åˆ†æ
    total_construction = sum(detail['construction_cost'] 
                           for detail in self.results['selected_details'])
    total_operating = sum(detail['operating_cost'] * 5 
                        for detail in self.results['selected_details'])
    
    # ç¬¬4æ­¥ï¼šè¾“å‡ºèƒŒåŒ…é—®é¢˜ç»“æœï¼ˆå¦‚æœæœ‰ï¼‰
    if 'knapsack' in self.results:
        knapsack = self.results['knapsack']
        print(f"ğŸ’ èƒŒåŒ…é—®é¢˜ç»“æœ:")
        print(f"  â€¢ é€‰ä¸­ç‰©å“: {', '.join(knapsack['selected_item_names'])}")
        print(f"  â€¢ æ€»ä»·å€¼: {knapsack['max_value']:.0f} å…ƒ")
```

**è¯­æ³•è¦ç‚¹ï¼š**
- `sum(è¡¨è¾¾å¼ for é¡¹ in åˆ—è¡¨)`ï¼šæ±‚å’Œè¡¨è¾¾å¼
- `', '.join(åˆ—è¡¨)`ï¼šç”¨é€—å·è¿æ¥åˆ—è¡¨å…ƒç´ 
- `if 'key' in å­—å…¸`ï¼šæ£€æŸ¥å­—å…¸æ˜¯å¦åŒ…å«æŸä¸ªé”®

## è¿è¡Œæ–¹æ³•

1. **ç›´æ¥è¿è¡Œè„šæœ¬ï¼š**
   ```bash
   python integer_programming_demo.py
   ```

2. **ä½œä¸ºæ¨¡å—å¯¼å…¥ï¼š**
   ```python
   from integer_programming_demo import IntegerProgrammingDemo
   demo = IntegerProgrammingDemo()
   demo.solve_facility_location()
   demo.solve_knapsack_problem()
   ```

## è¾“å‡ºç»“æœè¯´æ˜

**æ§åˆ¶å°è¾“å‡ºï¼š**
- è®¾æ–½é€‰å€æœ€ä¼˜æ–¹æ¡ˆï¼ˆé€‰ä¸­çš„åœ°ç‚¹ï¼‰
- èƒŒåŒ…é—®é¢˜æœ€ä¼˜é€‰æ‹©ï¼ˆé€‰ä¸­çš„ç‰©å“ï¼‰
- æˆæœ¬åˆ†æå’Œä»·å€¼åˆ†æ
- æƒ…æ™¯åˆ†æç»“æœ

**ç”Ÿæˆæ–‡ä»¶ï¼š**
- `integer_programming_results.png`ï¼šå¯è§†åŒ–å›¾è¡¨

## ç®—æ³•åŸç†ç®€ä»‹

**åˆ†æ”¯å®šç•Œæ³•ï¼ˆBranch and Boundï¼‰ï¼š**
1. **åˆ†æ”¯**ï¼šæŠŠé—®é¢˜åˆ†æˆæ›´å°çš„å­é—®é¢˜
2. **å®šç•Œ**ï¼šè®¡ç®—æ¯ä¸ªå­é—®é¢˜çš„ä¸Šä¸‹ç•Œ
3. **å‰ªæ**ï¼šæ’é™¤ä¸å¯èƒ½åŒ…å«æœ€ä¼˜è§£çš„åˆ†æ”¯
4. **æ±‚è§£**ï¼šæ‰¾åˆ°æœ€ä¼˜çš„æ•´æ•°è§£

**ä¸ºä»€ä¹ˆç”¨æ•´æ•°è§„åˆ’ï¼Ÿ**
- æœ‰äº›å†³ç­–åªèƒ½æ˜¯"æ˜¯"æˆ–"å¦"ï¼ˆå»ºè®¾æ–½ã€é€‰ç‰©å“ï¼‰
- æ™®é€šçº¿æ€§è§„åˆ’å¯èƒ½ç»™å‡ºå°æ•°è§£ï¼ˆæ¯”å¦‚å»º0.5ä¸ªè®¾æ–½ï¼‰
- æ•´æ•°è§„åˆ’ç¡®ä¿è§£çš„å®é™…å¯è¡Œæ€§

## å®é™…åº”ç”¨åœºæ™¯

1. **è®¾æ–½é€‰å€**ï¼šå·¥å‚ã€ä»“åº“ã€åŒ»é™¢ã€å­¦æ ¡çš„é€‰å€
2. **èµ„æºåˆ†é…**ï¼šäººå‘˜æ’ç­ã€è®¾å¤‡é…ç½®
3. **æŠ•èµ„å†³ç­–**ï¼šé¡¹ç›®é€‰æ‹©ã€èµ„äº§ç»„åˆ
4. **ç”Ÿäº§è®¡åˆ’**ï¼šæ‰¹é‡ç”Ÿäº§ã€åº“å­˜ç®¡ç†

## æŠ€æœ¯è¦ç‚¹

1. **PuLPåº“ä½¿ç”¨**ï¼š
   - `LpVariable(cat='Binary')`ï¼š0-1å˜é‡
   - `LpVariable(cat='Integer')`ï¼šæ•´æ•°å˜é‡
   - `PULP_CBC_CMD(msg=0)`ï¼šé™é»˜æ±‚è§£

2. **çº¦æŸæ¡ä»¶è®¾ç½®**ï¼š
   - ç­‰å¼çº¦æŸï¼š`prob += è¡¨è¾¾å¼ == å€¼`
   - ä¸ç­‰å¼çº¦æŸï¼š`prob += è¡¨è¾¾å¼ <= å€¼`

3. **ç»“æœå¤„ç†**ï¼š
   - `prob.status`ï¼šæ±‚è§£çŠ¶æ€ï¼ˆ1=æœ€ä¼˜ï¼Œ0=ä¸å¯è¡Œï¼‰
   - `å˜é‡.varValue`ï¼šå˜é‡çš„æœ€ä¼˜å€¼
   - `pulp.value(prob.objective)`ï¼šç›®æ ‡å‡½æ•°æœ€ä¼˜å€¼

4. **å¯è§†åŒ–æŠ€å·§**ï¼š
   - ç”¨é¢œè‰²åŒºåˆ†é€‰ä¸­/æœªé€‰ä¸­
   - æ·»åŠ æ ‡è®°ç¬¦å·ï¼ˆâœ“ï¼‰
   - ç»Ÿä¸€å›¾è¡¨æ ·å¼å’Œä¸­æ–‡æ ‡ç­¾